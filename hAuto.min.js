!function(e,t){"use strict";if("undefined"==typeof e)throw new Error("hAuto requires angular");var n="form-control",i="fa fa-spinner fa-spin fa-lg",s="list-group",a="list-group-item",o=function(e){return e},l=function(e,t,n,i){e[n]||t.$set(n,i)},r=function(e){return function(t){switch(t.keyCode){case 38:e.moveUp(),e.$apply();break;case 40:e.moveDown(),e.$apply();break;case 13:e.selectItem(e.$curIndex),e.$apply()}t.preventDefault()}},c=function(e){switch(e.keyCode){case 38:case 40:return void e.preventDefault()}},u=e.module("hAuto",[]),d=function(u,d){return{restrict:"AE",scope:{inputClass:"@",spinnerClass:"@",itemsClass:"@",itemClass:"@",displayFormatter:"&",displayField:"@",value:"=",initItems:"=",itemSelect:"&",lazyLoad:"&"},link:function(p,f,m){var v,h=e.element(t),y=!1;p.loading=!1,l(p,m,"inputClass",n),l(p,m,"spinnerClass",i),l(p,m,"itemsClass",s),l(p,m,"itemClass",a),p.formatter=m.displayFormatter?p.displayFormatter():o;var g=r(p),$=function(){p.$curIndex=-1,p.list=[]},x=function(){y||(h.on("keyup",g),h.on("keydown",c),y=!0)},C=function(){h.off("keyup",g),h.off("keydown",c),y=!1},w=function(t){for(var n,i=f.children(),s=0;s<i.length;s++)if(n=e.element(i[s]),n.hasClass(t))return n},I=function(e){p.list=p.searchTxt?u("filter")(e,p.searchTxt):[];var t=f.find("input");d(function(){var e=w(p.itemsClass);e&&e.css({position:"absolute",width:t.prop("offsetWidth")+"px"})}),x()},k=function(e){I(e),p.loading=!1,p.$apply()};$(),p.moveUp=function(){p.$curIndex>0&&p.$curIndex--},p.moveDown=function(){p.$curIndex+1<p.list.length&&p.$curIndex++},p.selectItem=function(e,t){if(0>e)return void(t&&(t.preventDefault(),t.stopPropagation()));var n=p.list[e];m.itemSelect&&p.itemSelect({item:n,index:e}),p.value=n,p.searchTxt=p.displayField?n[p.displayField]:p.formatter(n),p.selected=!0,t&&(t.preventDefault(),t.stopPropagation())},p.$watch("searchTxt",function(e){return!e||p.selected?($(),C(),void(p.selected&&(p.selected=!1))):m.lazyLoad?(v&&d.cancel([v]),$(),p.loading=!0,d(function(){var e=f.find("input");w("spinner-position").css({position:"absolute",width:e.prop("offsetWidth")+"px"})}),void(v=d(function(){p.lazyLoad({handler:k,searchTxt:e})},1e3))):void I(p.initItems)}),p.$on("$destroy",function(){C()})},template:'<input type="text" ng-class="inputClass" ng-model="searchTxt"/><div class="spinner-position" ng-if="loading"><i ng-class="spinnerClass"></i></div><div ng-if="list.length !== 0" ng-class="itemsClass"><a ng-repeat="li in list" href ng-click="selectItem($index, $event);" class="{{itemClass}}" ng-class="{active: $index === $curIndex}">{{ displayField ? li[displayField] : formatter(li) }}</a></div>'}};u.directive("hAuto",["$filter","$timeout",d])}(angular,window);
//# sourceMappingURL=hAuto.min.js.map