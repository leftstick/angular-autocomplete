!function(e,t){"use strict";if("undefined"==typeof e)throw new Error("hAuto requires angular");var n="form-control",i="fa fa-spinner fa-spin fa-lg",s="list-group",a="list-group-item",o=function(e){return e},l=function(e,t,n,i){e[n]=t[n]?t[n]:i},r=function(e){return function(t){switch(t.keyCode){case 38:e.moveUp(),e.$apply();break;case 40:e.moveDown(),e.$apply();break;case 13:e.selectItem(e.$curIndex),e.$apply()}t.preventDefault()}},c=function(e){switch(e.keyCode){case 38:case 40:return void e.preventDefault()}},d=e.module("hAuto",[]),u=function(d,u){return{restrict:"AE",scope:{displayFormatter:"&",displayField:"@",value:"=",initItems:"=",itemSelect:"&",lazyLoad:"&"},link:function(p,f,m){var v,h=e.element(t),y=!1;p.loading=!1,l(p,m,"inputClass",n),l(p,m,"spinnerClass",i),l(p,m,"itemsClass",s),l(p,m,"itemClass",a),l(p,m,"inputAddonTxt",""),p.formatter=m.displayFormatter?p.displayFormatter():o;var g=r(p),x=function(){p.$curIndex=-1,p.list=[]},$=function(){y||(h.on("keyup",g),h.on("keydown",c),y=!0)},w=function(){h.off("keyup",g),h.off("keydown",c),y=!1},C=function(t){for(var n,i=f.children(),s=0;s<i.length;s++)if(n=e.element(i[s]),n.hasClass(t))return n},I=function(e){p.list=p.searchTxt?d("filter")(e,p.searchTxt):[];var t=f.find("input");u(function(){var e=C(p.itemsClass);e&&e.css({position:"absolute",width:t.prop("offsetWidth")+"px"})}),$()},k=function(e){I(e),p.loading=!1,p.$apply()};x(),p.moveUp=function(){p.$curIndex>0&&p.$curIndex--},p.moveDown=function(){p.$curIndex+1<p.list.length&&p.$curIndex++},p.selectItem=function(e,t){if(0>e)return void(t&&(t.preventDefault(),t.stopPropagation()));var n=p.list[e];m.itemSelect&&p.itemSelect({item:n,index:e}),p.value=n,p.searchTxt=p.displayField?n[p.displayField]:p.formatter(n),p.selected=!0,t&&(t.preventDefault(),t.stopPropagation())},p.$watch("searchTxt",function(e){return!e||p.selected?(x(),w(),void(p.selected&&(p.selected=!1))):m.lazyLoad?(v&&u.cancel([v]),x(),p.loading=!0,u(function(){var e=f.find("input");C("spinner-position").css({position:"absolute",width:e.prop("offsetWidth")+"px"})}),void(v=u(function(){p.lazyLoad({handler:k,searchTxt:e})},1e3))):void I(p.initItems)}),p.$on("$destroy",function(){w()})},template:'<input type="text" ng-class="inputClass" ng-model="searchTxt"/><div class="spinner-position" ng-if="loading"><i ng-class="spinnerClass"></i></div><div ng-if="list.length !== 0" ng-class="itemsClass"><a ng-repeat="li in list" href ng-click="selectItem($index, $event);" class="{{itemClass}}" ng-class="{active: $index === $curIndex}">{{ displayField ? li[displayField] : formatter(li) }}</a></div>'}};d.directive("hAuto",["$filter","$timeout",u])}(angular,window);
//# sourceMappingURL=hAuto.min.js.map