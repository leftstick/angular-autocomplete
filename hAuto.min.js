!function(e,t){"use strict";if("undefined"==typeof e)throw new Error("hAuto requires angular");var n=function(e){return e},i=function(e){return function(t){switch(t.keyCode){case 38:e.moveUp(),e.$apply();break;case 40:e.moveDown(),e.$apply();break;case 13:e.selectItem(e.$curIndex),e.$apply()}t.preventDefault()}},o=function(e){switch(e.keyCode){case 38:case 40:return void e.preventDefault()}},a=e.module("hAuto",[]),r=function(a,r){return{restrict:"AE",scope:{displayFormatter:"&",displayField:"@",addon:"=",value:"=",initItems:"=",itemSelect:"&",lazyLoad:"&",onSubmit:"&"},link:function(s,l,c){var d,u=e.element(t),p=!1;s.loading=!1,s.formatter=c.displayFormatter?s.displayFormatter():n;var f=i(s),v=function(){s.$curIndex=-1,s.list=[]},m=function(){p||(u.on("keyup",f),u.on("keydown",o),p=!0)},h=function(){u.off("keyup",f),u.off("keydown",o),p=!1},g=function(t){for(var n,i=l.children(),o=0;o<i.length;o++)if(n=e.element(i[o]),n.hasClass(t))return n},y=function(e){s.list=s.searchTxt?a("filter")(e,s.searchTxt):[];var t=l.find("input");r(function(){var e=g("list-group");e&&e.css({position:"absolute",width:t.prop("offsetWidth")+"px","z-index":"100"})}),m()},x=function(e){y(e),s.loading=!1,s.$apply()};v(),s.moveUp=function(){s.$curIndex>0&&s.$curIndex--},s.moveDown=function(){s.$curIndex+1<s.list.length&&s.$curIndex++},s.selectItem=function(e,t){if(0>e)return void(t&&(t.preventDefault(),t.stopPropagation()));var n=s.list[e];c.itemSelect&&s.itemSelect({item:n,index:e}),s.value=n,s.searchTxt=s.displayField?n[s.displayField]:s.formatter(n),s.selected=!0,t&&(t.preventDefault(),t.stopPropagation())},s.$watch("searchTxt",function(e){return!e||s.selected?(v(),h(),void(s.selected&&(s.selected=!1))):c.lazyLoad?(d&&r.cancel([d]),v(),s.loading=!0,r(function(){var e=l.find("input");g("spinner-position").css({position:"absolute",width:e.prop("offsetWidth")+"px","z-index":"100"})}),void(d=r(function(){s.lazyLoad({handler:x,searchTxt:e})},1e3))):void y(s.initItems)}),s.$on("$destroy",function(){h()})},template:'<div class="input-group"><input type="text" class="form-control" ng-model="searchTxt"/><span class="input-group-addon" ng-click="onSubmit($event)"><i class="fa fa-search"></i></span></div><div class="spinner-position" ng-if="loading"><i class="fa fa-spinner fa-spin fa-lg"></i></div><div ng-if="list.length !== 0" class="list-group"><a ng-repeat="li in list" href ng-click="selectItem($index, $event);" class="list-group-item" ng-class="{active: $index === $curIndex}">{{ displayField ? li[displayField] : formatter(li) }}</a></div>'}};a.directive("hAuto",["$filter","$timeout",r])}(angular,window);
//# sourceMappingURL=hAuto.min.js.map