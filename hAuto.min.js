!function(e,t){"use strict";if("undefined"==typeof e)throw new Error("hAuto requires angular");var n=function(e){return e},i=function(e){return function(t){switch(t.keyCode){case 38:e.moveUp(),e.$apply();break;case 40:e.moveDown(),e.$apply();break;case 13:e.selectItem(e.$curIndex),e.$apply()}t.stopPropagation(),t.preventDefault()}},o=function(e){switch(e.keyCode){case 13:case 38:case 40:return e.stopPropagation(),void e.preventDefault()}},a=e.module("hAuto",[]),s=function(a,s){return{restrict:"AE",scope:{displayFormatter:"&",displayField:"@",addon:"=",value:"=",initItems:"=",itemSelect:"&",lazyLoad:"&",onSubmit:"&"},link:function(r,l,c){var d,u=e.element(t),p=!1;r.loading=!1,r.formatter=c.displayFormatter?r.displayFormatter():n;var f=i(r),v=function(){r.$curIndex=-1,r.list=[]},m=function(){p||(u.on("keyup",f),u.on("keydown",o),p=!0)},g=function(){u.off("keyup",f),u.off("keydown",o),p=!1},h=function(t){for(var n,i=l.children(),o=0;o<i.length;o++)if(n=e.element(i[o]),n.hasClass(t))return n},y=function(e){r.list=r.searchTxt?a("filter")(e,r.searchTxt):[];var t=l.find("input");s(function(){var e=h("list-group");e&&e.css({position:"absolute",width:t.prop("offsetWidth")+"px","z-index":"100"})}),m()},x=function(e){y(e),r.loading=!1,r.$apply()};v(),r.moveUp=function(){r.$curIndex>0&&r.$curIndex--},r.moveDown=function(){r.$curIndex+1<r.list.length&&r.$curIndex++},r.selectItem=function(e,t){if(0>e)return void(t&&(t.preventDefault(),t.stopPropagation()));var n=r.list[e];c.itemSelect&&r.itemSelect({item:n,index:e}),r.value=n;var i=r.displayField?n[r.displayField]:r.formatter(n);r.selected=!0,r.searchTxt===i?(v(),g(),r.selected&&(r.selected=!1)):r.searchTxt=i,t&&(t.preventDefault(),t.stopPropagation())},r.$watch("searchTxt",function(e){return r.value=e,!e||r.selected?(v(),g(),void(r.selected&&(r.selected=!1))):c.lazyLoad?(d&&s.cancel([d]),v(),r.loading=!0,s(function(){var e=l.find("input");h("spinner-position").css({position:"absolute",width:e.prop("offsetWidth")+"px","z-index":"100"})}),void(d=s(function(){r.lazyLoad({handler:x,searchTxt:e})},1e3))):void y(r.initItems)}),r.$on("$destroy",function(){g()})},template:'<div class="input-group"><input type="text" class="form-control" ng-model="searchTxt"/><span class="input-group-addon btn" ng-click="onSubmit($event)"><i class="fa fa-search"></i></span></div><div class="spinner-position" ng-if="loading"><i class="fa fa-spinner fa-spin fa-lg"></i></div><div ng-if="list.length !== 0" class="list-group"><a ng-repeat="li in list" href ng-click="selectItem($index, $event);" class="list-group-item" ng-class="{active: $index === $curIndex}">{{ displayField ? li[displayField] : formatter(li) }}</a></div>'}};a.directive("hAuto",["$filter","$timeout",s])}(angular,window);
//# sourceMappingURL=hAuto.min.js.map